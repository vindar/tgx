<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.5"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>TGX: src/Mesh3D.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectlogo"><img alt="Logo" src="logo.png"/></td>
  <td id="projectalign">
   <div id="projectname">TGX<span id="projectnumber">&#160;1.0.3</span>
   </div>
   <div id="projectbrief">A tiny 2D/3D graphics library optimized for 32 bits microcontrollers.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.5 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('_mesh3_d_8h.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle"><div class="title">Mesh3D.h File Reference</div></div>
</div><!--header-->
<div class="contents">

<p>3D model mesh class.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &quot;<a class="el" href="_misc_8h_source.html">Misc.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="_vec2_8h_source.html">Vec2.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="_vec3_8h_source.html">Vec3.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="_box3_8h_source.html">Box3.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="_color_8h_source.html">Color.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="_image_8h_source.html">Image.h</a>&quot;</code><br />
<code>#include &lt;stdint.h&gt;</code><br />
<code>#include &quot;Mesh3D.inl&quot;</code><br />
</div>
<p><a href="_mesh3_d_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="nested-classes" name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structtgx_1_1_mesh3_d.html">tgx::Mesh3D&lt; color_t &gt;</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">3D mesh data stucture.  <a href="structtgx_1_1_mesh3_d.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a702507b5a357a4e5d538c0851118e5ea"><td class="memTemplParams" colspan="2">template&lt;typename color_t &gt; </td></tr>
<tr class="memitem:a702507b5a357a4e5d538c0851118e5ea"><td class="memTemplItemLeft" align="right" valign="top">const Mesh3D&lt; color_t &gt; *&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="_mesh3_d_8h.html#a702507b5a357a4e5d538c0851118e5ea">tgx::cacheMesh</a> (const Mesh3D&lt; color_t &gt; *mesh, void *ram1_buffer, size_t ram1_size, void *ram2_buffer, size_t ram2_size, const char *copy_order=&quot;VNTIF&quot;, size_t *ram1_used=nullptr, size_t *ram2_used=nullptr)</td></tr>
<tr class="memdesc:a702507b5a357a4e5d538c0851118e5ea"><td class="mdescLeft">&#160;</td><td class="mdescRight">Creates a "cache version" of a mesh by copying part of its data into fast memory buffers.  <a href="_mesh3_d_8h.html#a702507b5a357a4e5d538c0851118e5ea">More...</a><br /></td></tr>
<tr class="separator:a702507b5a357a4e5d538c0851118e5ea"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa0e5c4ceb583a160ecfbd2b699966a43"><td class="memTemplParams" colspan="2">template&lt;typename color_t &gt; </td></tr>
<tr class="memitem:aa0e5c4ceb583a160ecfbd2b699966a43"><td class="memTemplItemLeft" align="right" valign="top">Mesh3D&lt; color_t &gt; *&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="_mesh3_d_8h.html#aa0e5c4ceb583a160ecfbd2b699966a43">tgx::copyMeshEXTMEM</a> (const Mesh3D&lt; color_t &gt; *mesh, bool copy_vertices=false, bool copy_normals=false, bool copy_texcoords=false, bool copy_textures=true, bool copy_faces=false)</td></tr>
<tr class="memdesc:aa0e5c4ceb583a160ecfbd2b699966a43"><td class="mdescLeft">&#160;</td><td class="mdescRight">Create a copy of a mesh where specified arrays in PROGMEM are copied to EXTMEM.  <a href="_mesh3_d_8h.html#aa0e5c4ceb583a160ecfbd2b699966a43">More...</a><br /></td></tr>
<tr class="separator:aa0e5c4ceb583a160ecfbd2b699966a43"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0575bac62b3bc78a8b151d17aa4fa742"><td class="memTemplParams" colspan="2">template&lt;typename color_t &gt; </td></tr>
<tr class="memitem:a0575bac62b3bc78a8b151d17aa4fa742"><td class="memTemplItemLeft" align="right" valign="top">void&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="_mesh3_d_8h.html#a0575bac62b3bc78a8b151d17aa4fa742">tgx::freeMeshEXTMEM</a> (Mesh3D&lt; color_t &gt; *mesh)</td></tr>
<tr class="memdesc:a0575bac62b3bc78a8b151d17aa4fa742"><td class="mdescLeft">&#160;</td><td class="mdescRight">Delete a mesh allocated with <a class="el" href="_mesh3_d_8h.html#aa0e5c4ceb583a160ecfbd2b699966a43" title="Create a copy of a mesh where specified arrays in PROGMEM are copied to EXTMEM.">copyMeshEXTMEM()</a>.  <a href="_mesh3_d_8h.html#a0575bac62b3bc78a8b151d17aa4fa742">More...</a><br /></td></tr>
<tr class="separator:a0575bac62b3bc78a8b151d17aa4fa742"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p >3D model mesh class. </p>
</div><h2 class="groupheader">Function Documentation</h2>
<a id="a702507b5a357a4e5d538c0851118e5ea" name="a702507b5a357a4e5d538c0851118e5ea"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a702507b5a357a4e5d538c0851118e5ea">&#9670;&#160;</a></span>cacheMesh()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename color_t &gt; </div>
      <table class="memname">
        <tr>
          <td class="memname">const Mesh3D&lt; color_t &gt; * tgx::cacheMesh </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structtgx_1_1_mesh3_d.html">Mesh3D</a>&lt; color_t &gt; *&#160;</td>
          <td class="paramname"><em>mesh</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>ram1_buffer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>ram1_size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>ram2_buffer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>ram2_size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>copy_order</em> = <code>&quot;VNTIF&quot;</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t *&#160;</td>
          <td class="paramname"><em>ram1_used</em> = <code>nullptr</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t *&#160;</td>
          <td class="paramname"><em>ram2_used</em> = <code>nullptr</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Creates a "cache version" of a mesh by copying part of its data into fast memory buffers. </p>
<p >A typical scenario for using this method is when when using a MCU (Teesny, ESP32..) with limited RAM and slow FLASH memory.</p>
<p >The method copy as much as it can into the given RAM1/RAM2 buffers but will leave the arrays that are to big in their current place. The method never 'fails' but it may return the original mesh if caching is not possible.</p>
<p >A C-string describes which arrays should be copied and in which order:</p>
<ul>
<li>"V" = vertex array. <br  />
</li>
<li>"N" = normal array. <br  />
</li>
<li>"T" = texture array. <br  />
</li>
<li>"I" = texture image <br  />
</li>
<li>"F" = face arrays.</li>
</ul>
<p >For example "VIT" means: "copy vertex arrays first, then image texture and finally texture
coord (if there is still room)".</p>
<dl class="section remark"><dt>Remarks</dt><dd><ol type="1">
<li>The memory buffers supplied do <b>not</b> need to be be aligned, the method takes care of it.</li>
<li>The method also caches the sub-meshes linked after this one.</li>
</ol>
</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">mesh</td><td>Pointer to the mesh to cache. </td></tr>
    <tr><td class="paramname">ram1_buffer</td><td>pointer to the first memory buffer (should have the fastest access). </td></tr>
    <tr><td class="paramname">ram1_size</td><td>size in bytes of the ram1 buffer. </td></tr>
    <tr><td class="paramname">ram2_buffer</td><td>pointer to a second memory buffer, may be nullptr. </td></tr>
    <tr><td class="paramname">ram2_size</td><td>size in bytes of the ram2 buffer or 0 if not supplied. </td></tr>
    <tr><td class="paramname">copy_order</td><td>(Optional) c string that describe which array should be copied and in which order. </td></tr>
    <tr><td class="paramname">ram1_used</td><td>If non-null, the number of bytes consumed in ram1_buffer is put here. </td></tr>
    <tr><td class="paramname">ram2_used</td><td>If non-null, the number of bytes consumed in ram2_buffer is put here.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The cached mesh (or the initial mesh if nothing was cached). </dd></dl>

</div>
</div>
<a id="aa0e5c4ceb583a160ecfbd2b699966a43" name="aa0e5c4ceb583a160ecfbd2b699966a43"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa0e5c4ceb583a160ecfbd2b699966a43">&#9670;&#160;</a></span>copyMeshEXTMEM()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename color_t &gt; </div>
      <table class="memname">
        <tr>
          <td class="memname">Mesh3D&lt; color_t &gt; * tgx::copyMeshEXTMEM </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structtgx_1_1_mesh3_d.html">Mesh3D</a>&lt; color_t &gt; *&#160;</td>
          <td class="paramname"><em>mesh</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>copy_vertices</em> = <code>false</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>copy_normals</em> = <code>false</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>copy_texcoords</em> = <code>false</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>copy_textures</em> = <code>true</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>copy_faces</em> = <code>false</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Create a copy of a mesh where specified arrays in PROGMEM are copied to EXTMEM. </p>
<dl class="section attention"><dt>Attention</dt><dd>This method is defined only for Teensy 4.1</dd></dl>
<dl class="section remark"><dt>Remarks</dt><dd><ol type="1">
<li>Obviously, external RAM must be present...</li>
<li>Only arrays in PROGMEM are copied to EXTMEM. Arrays located elsewhere are not copied.</li>
<li>The source mesh must not have any part located in EXTMEM already or the method will fail.</li>
<li>In practice, it is most efficient to copy textures to EXTMEM (the other arrays provide less improvments).</li>
</ol>
</dd></dl>
<dl class="section return"><dt>Returns</dt><dd>a pointer to the new mesh or nullptr on error (nothing is allocated in that case). the methods also copies the sub-meshes linked to this one (via the -&gt;next pointer). <br  />
 </dd></dl>

</div>
</div>
<a id="a0575bac62b3bc78a8b151d17aa4fa742" name="a0575bac62b3bc78a8b151d17aa4fa742"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0575bac62b3bc78a8b151d17aa4fa742">&#9670;&#160;</a></span>freeMeshEXTMEM()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename color_t &gt; </div>
      <table class="memname">
        <tr>
          <td class="memname">void tgx::freeMeshEXTMEM </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structtgx_1_1_mesh3_d.html">Mesh3D</a>&lt; color_t &gt; *&#160;</td>
          <td class="paramname"><em>mesh</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Delete a mesh allocated with copyMeshEXTMEM(). </p>
<dl class="section attention"><dt>Attention</dt><dd>This method is defined only for Teensy 4.1</dd></dl>
<p>Deletes also the linked sub-meshes is any. </p>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_68267d1309a1af8e8297ef4c3efbcdba.html">src</a></li><li class="navelem"><a class="el" href="_mesh3_d_8h.html">Mesh3D.h</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.5 </li>
  </ul>
</div>
</body>
</html>
